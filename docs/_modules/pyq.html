<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyq &mdash; wavesight  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            wavesight
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/across_ml.html">across_ml module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/convstore.html">convstore module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/datapipes.html">datapipes module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/diffkernels.html">diffkernels module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/EH4_animate.html">EH4_animate module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/EH4_plotter.html">EH4_plotter module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/EH4-to-EH5.html">EH4-to-EH5 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/EH5-assembly.html">EH5-assembly module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fiber_animate.html">fiber_animate module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fiber_bridge.html">fiber_bridge module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fiber_bundle.html">fiber_bundle module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fiber_launcher.html">fiber_launcher module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fiber_platform.html">fiber_platform module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fiber_plotter.html">fiber_plotter module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fieldgenesis.html">fieldgenesis module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fields.html">fields module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fungenerators.html">fungenerators module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/hail_david.html">hail_david module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/housekeeping.html">housekeeping module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/maxwell.html">Maxwellâ€™s Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/mem_tester.html">mem_tester module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/meta_designer.html">meta_designer module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/metalenses.html">metalenses module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/metal.html">metal module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/metaorchestra.html">metaorchestra module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/misc.html">misc module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/ml_plot_in.html">ml_plot_in module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/modules.html">wavesight</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/phase_factory.html">phase_factory module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/printech.html">printech module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/pyq.html">pyq module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/readme_factory.html">readme_factory module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/slacking.html">slacking module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/sniffer.html">sniffer module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/standard_candle.html">standard_candle module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/templates.html">templates module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/wavegraphics.html">wavegraphics module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/wavesight.html">wavesight module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">wavesight</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">pyq</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pyq</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="c1"># import rich</span>

<span class="n">slurm_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;Account associated with the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="s1">&#39;Job id.  This will have a unique value for each element of job arrays.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="s1">&#39;Executing (batch) host. For an allocated session, this is the host on which the session is executing (i.e. the node from which the srun or the salloc command was executed). For a  batch  job, this  is  the  node executing the batch script. In the case of a typical Linux cluster, this would be the compute node zero of the allocation. In the case of a Cray ALPS system, this would be the front-end host whose slurmd daemon executes the job script.&#39;</span><span class="p">,</span>
 <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;Minimum number of CPUs (processors) per node requested by the job.  This reports the value of the srun --mincpus option with a default value of zero.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of CPUs (processors) requested by the job or allocated to it if already running.  As a job is completing this number will reflect the current number of CPUs allocated.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;Minimum size of temporary disk space (in MB) requested by the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="s1">&#39;Number  of  nodes allocated to the job or the minimum number of nodes required by a pending job. The actual number of nodes allocated to a pending job may exceed this number if the job specified a node range count (e.g.  minimum and maximum node counts) or the job specifies a processor count instead of a node count. As a job is completing this number  will  reflect  the  current number of nodes allocated.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s1">&#39;Time at which the job ended or is expected to end (based upon its time limit).  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="s1">&#39;Job  dependencies  remaining.  This  job will not begin execution until these dependent jobs complete. In the case of a job that can not run due to job dependencies never being satisfied, the full original job dependency specification will be reported. A value of NULL implies this job has no dependencies.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;Features required by the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="s2">&quot;Job array&#39;s job ID. This is the base job ID.  For non-array jobs, this is the job ID.  (Valid for jobs only)&quot;</span><span class="p">,</span>
 <span class="s1">&#39;g&#39;</span><span class="p">:</span> <span class="s1">&#39;Group name of the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;G&#39;</span><span class="p">:</span> <span class="s1">&#39;Group ID of the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="s1">&#39;Can the compute resources allocated to the job be over subscribed by other jobs.  The resources to be over subscribed can be nodes, sockets, cores, or hyperthreads depending  upon  configuration.   The value will be &quot;YES&quot; if the job was submitted with the oversubscribe option or the partition is configured with OverSubscribe=Force, &quot;NO&quot; if the job requires exclusive node access, &quot;USER&quot; if the allocated compute nodes are dedicated to a single user, &quot;MCS&quot; if the allocated compute nodes are dedicated to a single security class (See MCSPlugin and MCSParameters configuration parameters for more information), &quot;OK&quot; otherwise (typically allocated dedicated CPUs), (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="s1">&#39;Number  of  sockets per node requested by the job.  This reports the value of the srun --sockets-per-node option.  When --sockets-per-node has not been set, &quot;*&quot; is displayed.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;i&#39;</span><span class="p">:</span> <span class="s1">&#39;Job or job step id.  In the case of job arrays, the job ID format will be of the form &quot;&lt;base_job_id&gt;_&lt;index&gt;&quot;.  By default, the job array index field size will be limited to  64  bytes.   Use the  environment  variable  SLURM_BITSTR_LEN to specify larger field sizes.  (Valid for jobs and job steps) In the case of heterogeneous job allocations, the job ID format will be of the form &quot;#+#&quot; where the first number is the &quot;heterogeneous job leader&quot; and the second number the zero origin offset for each component of the job.&#39;</span><span class="p">,</span>
 <span class="s1">&#39;I&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of cores per socket requested by the job.  This reports the value of the srun --cores-per-socket option.  When --cores-per-socket has not been set, &quot;*&quot; is displayed.  (Valid  for  jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;j&#39;</span><span class="p">:</span> <span class="s1">&#39;Job or job step name.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;J&#39;</span><span class="p">:</span> <span class="s1">&#39;Number  of  threads per core requested by the job.  This reports the value of the srun --threads-per-core option.  When --threads-per-core has not been set, &quot;*&quot; is displayed.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="s1">&#39;Comment associated with the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;K&#39;</span><span class="p">:</span> <span class="s1">&#39;Job array index.  By default, this field size will be limited to 64 bytes.  Use the environment variable SLURM_BITSTR_LEN to specify larger field sizes.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="s1">&#39;Time limit of the job or job step in days-hours:minutes:seconds.  The value may be &quot;NOT_SET&quot; if not yet established or &quot;UNLIMITED&quot; for no limit.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;L&#39;</span><span class="p">:</span> <span class="s1">&#39;Time left for the job to execute in days-hours:minutes:seconds.  This value is calculated by subtracting the job</span><span class="se">\&#39;</span><span class="s1">s time used from its time limit.  The value may be &quot;NOT_SET&quot; if not yet established or &quot;UNLIMITED&quot; for no limit.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="s1">&#39;Minimum size of memory (in MB) requested by the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="s1">&#39;Time used by the job or job step in days-hours:minutes:seconds.  The days and hours are printed only as needed.  For job steps this field shows the elapsed time since execution began and thus will be inaccurate for job steps which have been suspended.  Clock skew between nodes in the cluster will cause the time to be inaccurate.  If the time is obviously wrong (e.g. negative),  it displays as &quot;INVALID&quot;.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="s1">&#39;List of node names explicitly requested by the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="s1">&#39;List  of nodes allocated to the job or job step. In the case of a COMPLETING job, the list of nodes will comprise only those nodes that have not yet been returned to service.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;o&#39;</span><span class="p">:</span> <span class="s1">&#39;The command to be executed.&#39;</span><span class="p">,</span>
 <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="s1">&#39;Are contiguous nodes requested by the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;p&#39;</span><span class="p">:</span> <span class="s1">&#39;Priority of the job (converted to a floating point number between 0.0 and 1.0).  Also see %Q.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;P&#39;</span><span class="p">:</span> <span class="s1">&#39;Partition of the job or job step.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;Quality of service associated with the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Q&#39;</span><span class="p">:</span> <span class="s1">&#39;Priority of the job (generally a very large unsigned integer).  Also see %p.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="s1">&#39;The reason a job is in its current state.  See the JOB REASON CODES section below for more information.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;R&#39;</span><span class="p">:</span> <span class="s1">&#39;For pending jobs: the reason a job is waiting for execution is printed within parenthesis.  For terminated jobs with failure: an explanation as to why the job failed is printed within  parenthesis.  For all other job states: the list of allocate nodes.  See the JOB REASON CODES section below for more information.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="s1">&#39;Node  selection  plugin  specific  data  for  a job. Possible data includes: Geometry requirement of resource allocation (X,Y,Z dimensions), Connection type (TORUS, MESH, or NAV == torus else mesh), Permit rotation of geometry (yes or no), Node use (VIRTUAL or COPROCESSOR), etc.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="s1">&#39;Actual or expected start time of the job or job step.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="s1">&#39;Job state in compact form.  See the JOB STATE CODES section below for a list of possible states.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="s1">&#39;Job state in extended form.  See the JOB STATE CODES section below for a list of possible states.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="s1">&#39;User name for a job or job step.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;U&#39;</span><span class="p">:</span> <span class="s1">&#39;User ID for a job or job step.  (Valid for jobs and job steps)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="s1">&#39;Reservation for the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;V&#39;</span><span class="p">:</span> <span class="s2">&quot;The job&#39;s submission time.&quot;</span><span class="p">,</span>
 <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="s1">&#39;Workload Characterization Key (wckey).  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;W&#39;</span><span class="p">:</span> <span class="s1">&#39;Licenses reserved for the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s1">&#39;List of node names explicitly excluded by the job.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="s1">&#39;Count of cores reserved on each node for system use (core specialization).  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s2">&quot;Nice value (adjustment to a job&#39;s scheduling priority).  (Valid for jobs only)&quot;</span><span class="p">,</span>
 <span class="s1">&#39;Y&#39;</span><span class="p">:</span> <span class="s1">&#39;For pending jobs, a list of the nodes expected to be used when the job is started.&#39;</span><span class="p">,</span>
 <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of requested sockets, cores, and threads (S:C:T) per node for the job.  When (S:C:T) has not been set, &quot;*&quot; is displayed.  (Valid for jobs only)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Z&#39;</span><span class="p">:</span> <span class="s2">&quot;The job&#39;s working directory.&quot;</span><span class="p">}</span>

<div class="viewcode-block" id="colorize">
<a class="viewcode-back" href="../usage/pyq.html#pyq.colorize">[docs]</a>
<span class="k">def</span> <span class="nf">colorize</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;red&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[31m&quot;</span><span class="p">,</span>
        <span class="s2">&quot;green&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[32m&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yellow&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[33m&quot;</span><span class="p">,</span>
        <span class="c1"># Add more colors as needed</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">colors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}{</span><span class="n">text</span><span class="si">}</span><span class="se">\033</span><span class="s2">[0m&quot;</span>  <span class="c1"># \033[0m resets the color</span></div>



<span class="n">slurm_things</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;%j | %T | </span><span class="si">%i</span><span class="s2"> | %C | %l | %L | </span><span class="si">%r</span><span class="s2"> | %S | %m | %D | </span><span class="si">%E</span><span class="s2"> | %k | %N&quot;</span>

<div class="viewcode-block" id="print_table">
<a class="viewcode-back" href="../usage/pyq.html#pyq.print_table">[docs]</a>
<span class="k">def</span> <span class="nf">print_table</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid data format. The function expects a list of lists.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># Determine the width of each column</span>
    <span class="n">column_widths</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">column</span><span class="p">)</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)]</span>

    <span class="c1"># Create a horizontal separator</span>
    <span class="n">separator</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">column_widths</span><span class="p">)</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">column_widths</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span><span class="p">)</span>

    <span class="c1"># Print the header</span>
    <span class="n">header</span><span class="p">,</span> <span class="o">*</span><span class="n">rows</span> <span class="o">=</span> <span class="n">data</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">separator</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">width</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">width</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">column_widths</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">separator</span><span class="p">)</span>

    <span class="c1"># Print the rows</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">width</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">width</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column_widths</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">separator</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_squeue_data">
<a class="viewcode-back" href="../usage/pyq.html#pyq.get_squeue_data">[docs]</a>
<span class="k">def</span> <span class="nf">get_squeue_data</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="c1"># Define a more comprehensive squeue format string</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;squeue&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span>
        <span class="s2">&quot;--format&quot;</span><span class="p">,</span>
        <span class="n">slurm_things</span>
    <span class="p">]</span>

    <span class="c1"># Execute the command</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error executing squeue: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># Parse the output</span>
    <span class="n">jobs</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="n">jobs</span> <span class="o">=</span> <span class="p">[</span><span class="n">job</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="n">jobs</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">jobs</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">jobs</span> <span class="o">=</span> <span class="n">get_squeue_data</span><span class="p">(</span><span class="s1">&#39;jlizaraz&#39;</span><span class="p">)</span>
    <span class="n">print_table</span><span class="p">(</span><span class="n">jobs</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>